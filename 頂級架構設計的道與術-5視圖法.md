#### 架構設計的原因

#### 軟件架構

---

![image-20210824144104715](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824144104715.png)

#### 架構設計方法-五視圖法

![image-20210824144236162](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824144236162.png)

![image-20210824144608195](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824144608195.png)



#### 如何成爲優秀架構師

架構師 != 技術大牛

架構師 能將業務轉換爲技術 合理運用技術支撐業務

![image-20210824145109064](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824145109064.png)

![image-20210824145127567](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824145127567.png)

![image-20210824145247617](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824145247617.png)

架構設計的本質：從宏觀的角度設計系統

整體規劃， 業務落地， 技術抽象：提取共性，保留個性，建立框架

架構設計方法

![image-20210824145520088](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824145520088.png)

#### 邏輯架構設計過程

#### 用例模型

![image-20210824145717272](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824145717272.png)

![image-20210824145730720](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824145730720.png)

![image-20210824145842456](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824145842456.png)

![image-20210824145916082](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824145916082.png)

![image-20210824145935145](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824145935145.png)

![image-20210824150113713](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824150113713.png)

![image-20210824150133392](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824150133392.png)

![image-20210824150143704](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824150143704.png)

#### 界面原型

![image-20210824150218208](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824150218208.png)

#### 領域模型



#### 技術趨勢

![image-20210824150418801](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824150418801.png)

![image-20210824150505048](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824150505048.png)

![image-20210824150606976](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824150606976.png)

![image-20210824150706312](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824150706312.png)



![image-20210824150729464](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824150729464.png)



![image-20210824150918304](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824150918304.png)





**用例模型->界面模型->領域模型**

****

***領域建模思想***

![image-20210824151147431](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824151147431.png)

![image-20210824151402718](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824151402718.png)

![image-20210824151429718](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824151429718.png)

***分析原則-SRP***  

![image-20210824151650824](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824151650824.png)

***付款變更的時候折扣是否會變 折扣變更的時候付款是否會變，如果答案否定，則說明二者爲不同職責***

![image-20210824152251367](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824152251367.png)

在領域模型的基礎上進行分析->SRP->設計模式

![image-20210824152502435](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824152502435.png)



#### 架構師職責

![image-20210824153059609](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824153059609.png)

![image-20210824153146809](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824153146809.png)

***需求 < 業務 架構師要理解業務，而不僅僅是需求***

### 數據架構

![image-20210824153537954](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824153537954.png)

![image-20210824153728108](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824153728108.png)

![image-20210824153757711](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824153757711.png)

#### 數據庫設計

![image-20210824154107792](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824154107792.png)

![image-20210824154159657](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824154159657.png)

![image-20210824154210362](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824154210362.png)

![image-20210824154251983](https://raw.githubusercontent.com/mengziup/pic/main/image-20210824154251983.png)

![image-20210825094935927](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825094935927.png)

大寬表提高查詢效率

![image-20210825095302783](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825095302783.png)

![image-20210825095414465](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825095414465.png)



![image-20210825095643987](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825095643987.png)

![image-20210825095609635](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825095609635.png)

NOSQL通過第一種方式實現繼承關係

![image-20210825095829637](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825095829637.png)



### 

![image-20210825100042060](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825100042060-16298568431531.png)

*貧血模型缺點： service承擔過多責任，不易擴展*

![image-20210825100100198](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825100100198.png)



![image-20210825100343497](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825100343497.png)

![image-20210825101157588](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825101157588.png)



只能通過聚合根進行查詢，效率差，所以DDD適合增刪改，不適合查詢，查詢直接通過SQL完成

![image-20210825101244612](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825101244612.png)



#### 限界上下文和上下文地圖

通過單一職責進行劃分

![image-20210825101837885](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825101837885.png)

![image-20210825102034049](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825102034049.png)



![image-20210825102407915](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825102407915.png)

![image-20210825102549260](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825102549260.png)

![image-20210825102621251](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825102621251.png)

![image-20210825102812524](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825102812524.png)

查詢庫使用nosql建寬表

![image-20210825103054409](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825103054409.png)



### 開發架構

![image-20210825103519701](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825103519701.png)

![image-20210825103650106](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825103650106.png)

![image-20210825104123604](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825104123604.png)

![image-20210825104202565](https://raw.githubusercontent.com/mengziup/pic/main/image-20210825104202565.png)

![image-20210826115055697](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826115055697.png)

![image-20210826115117782](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826115117782.png)

![image-20210826115759571](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826115759571.png)

![image-20210826115820553](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826115820553.png)



### 運行架構

![image-20210826175122598](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826175122598.png)

![image-20210826175215814](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826175215814.png)

![image-20210826180046056](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826180046056.png)

![image-20210826180217867](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826180217867.png)

![image-20210826180252706](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826180252706.png)

*之前的實現*

![image-20210826180419997](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826180419997.png)

*現在的實現*

![image-20210826180457140](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826180457140.png)

#### 海量數據處理

![image-20210826181134910](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826181134910.png)

![image-20210826181353199](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826181353199.png)

![image-20210826181604730](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826181604730-16299729654242.png)



![image-20210826181651362](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826181651362.png)



![image-20210826181741955](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826181741955.png)

![image-20210826181825439](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826181825439.png)

![image-20210826181914476](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826181914476.png)

*發佈中心：k8s + docker*

![image-20210826182239234](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826182239234.png)



![image-20210826182351211](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826182351211.png)



![image-20210826182510852](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826182510852.png)

![image-20210826182700206](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826182700206.png)

![image-20210826182823128](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826182823128.png)

![image-20210826182900856](https://raw.githubusercontent.com/mengziup/pic/main/image-20210826182900856.png)



![image-20210830165635796](https://raw.githubusercontent.com/mengziup/pic/main/image-20210830165635796.png)



![image-20210830165751963](https://raw.githubusercontent.com/mengziup/pic/main/image-20210830165751963.png)

![image-20210830165827363](https://raw.githubusercontent.com/mengziup/pic/main/image-20210830165827363.png)

![image-20210830170014210](https://raw.githubusercontent.com/mengziup/pic/main/image-20210830170014210.png)







### 問題

用例模型 界面原型 ：產品經理負責，架構參與

需求後期，設計前期 架構負責領域模型

